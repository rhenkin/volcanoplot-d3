(()=>{"use strict";var t={n:e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{VolcanoPlot:()=>$});const n=require("react");var r=t.n(n);const o=require("d3");var i,a=[],s="ResizeObserver loop completed with undelivered notifications.";!function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"}(i||(i={}));var c,u=function(t){return Object.freeze(t)},l=function(t,e){this.inlineSize=t,this.blockSize=e,u(this)},f=function(){function t(t,e,n,r){return this.x=t,this.y=e,this.width=n,this.height=r,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,u(this)}return t.prototype.toJSON=function(){var t=this;return{x:t.x,y:t.y,top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t}(),h=function(t){return t instanceof SVGElement&&"getBBox"in t},d=function(t){if(h(t)){var e=t.getBBox(),n=e.width,r=e.height;return!n&&!r}var o=t,i=o.offsetWidth,a=o.offsetHeight;return!(i||a||t.getClientRects().length)},g=function(t){var e,n;if(t instanceof Element)return!0;var r=null===(n=null===(e=t)||void 0===e?void 0:e.ownerDocument)||void 0===n?void 0:n.defaultView;return!!(r&&t instanceof r.Element)},p="undefined"!=typeof window?window:{},v=new WeakMap,b=/auto|scroll/,m=/^tb|vertical/,y=/msie|trident/i.test(p.navigator&&p.navigator.userAgent),w=function(t){return parseFloat(t||"0")},x=function(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=!1),new l((n?e:t)||0,(n?t:e)||0)},E=u({devicePixelContentBoxSize:x(),borderBoxSize:x(),contentBoxSize:x(),contentRect:new f(0,0,0,0)}),O=function(t,e){if(void 0===e&&(e=!1),v.has(t)&&!e)return v.get(t);if(d(t))return v.set(t,E),E;var n=getComputedStyle(t),r=h(t)&&t.ownerSVGElement&&t.getBBox(),o=!y&&"border-box"===n.boxSizing,i=m.test(n.writingMode||""),a=!r&&b.test(n.overflowY||""),s=!r&&b.test(n.overflowX||""),c=r?0:w(n.paddingTop),l=r?0:w(n.paddingRight),g=r?0:w(n.paddingBottom),p=r?0:w(n.paddingLeft),O=r?0:w(n.borderTopWidth),S=r?0:w(n.borderRightWidth),T=r?0:w(n.borderBottomWidth),z=p+l,B=c+g,R=(r?0:w(n.borderLeftWidth))+S,P=O+T,C=s?t.offsetHeight-P-t.clientHeight:0,k=a?t.offsetWidth-R-t.clientWidth:0,j=o?z+R:0,A=o?B+P:0,M=r?r.width:w(n.width)-j-k,L=r?r.height:w(n.height)-A-C,I=M+z+k+R,D=L+B+C+P,N=u({devicePixelContentBoxSize:x(Math.round(M*devicePixelRatio),Math.round(L*devicePixelRatio),i),borderBoxSize:x(I,D,i),contentBoxSize:x(M,L,i),contentRect:new f(p,c,M,L)});return v.set(t,N),N},S=function(t,e,n){var r=O(t,n),o=r.borderBoxSize,a=r.contentBoxSize,s=r.devicePixelContentBoxSize;switch(e){case i.DEVICE_PIXEL_CONTENT_BOX:return s;case i.BORDER_BOX:return o;default:return a}},T=function(t){var e=O(t);this.target=t,this.contentRect=e.contentRect,this.borderBoxSize=u([e.borderBoxSize]),this.contentBoxSize=u([e.contentBoxSize]),this.devicePixelContentBoxSize=u([e.devicePixelContentBoxSize])},z=function(t){if(d(t))return 1/0;for(var e=0,n=t.parentNode;n;)e+=1,n=n.parentNode;return e},B=function(){var t=1/0,e=[];a.forEach((function(n){if(0!==n.activeTargets.length){var r=[];n.activeTargets.forEach((function(e){var n=new T(e.target),o=z(e.target);r.push(n),e.lastReportedSize=S(e.target,e.observedBox),o<t&&(t=o)})),e.push((function(){n.callback.call(n.observer,r,n.observer)})),n.activeTargets.splice(0,n.activeTargets.length)}}));for(var n=0,r=e;n<r.length;n++)(0,r[n])();return t},R=function(t){a.forEach((function(e){e.activeTargets.splice(0,e.activeTargets.length),e.skippedTargets.splice(0,e.skippedTargets.length),e.observationTargets.forEach((function(n){n.isActive()&&(z(n.target)>t?e.activeTargets.push(n):e.skippedTargets.push(n))}))}))},P=[],C=0,k={attributes:!0,characterData:!0,childList:!0,subtree:!0},j=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],A=function(t){return void 0===t&&(t=0),Date.now()+t},M=!1,L=new(function(){function t(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return t.prototype.run=function(t){var e=this;if(void 0===t&&(t=250),!M){M=!0;var n,r=A(t);n=function(){var n=!1;try{n=function(){var t,e=0;for(R(e);a.some((function(t){return t.activeTargets.length>0}));)e=B(),R(e);return a.some((function(t){return t.skippedTargets.length>0}))&&("function"==typeof ErrorEvent?t=new ErrorEvent("error",{message:s}):((t=document.createEvent("Event")).initEvent("error",!1,!1),t.message=s),window.dispatchEvent(t)),e>0}()}finally{if(M=!1,t=r-A(),!C)return;n?e.run(1e3):t>0?e.run(t):e.start()}},function(t){if(!c){var e=0,n=document.createTextNode("");new MutationObserver((function(){return P.splice(0).forEach((function(t){return t()}))})).observe(n,{characterData:!0}),c=function(){n.textContent=""+(e?e--:e++)}}P.push(t),c()}((function(){requestAnimationFrame(n)}))}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var t=this,e=function(){return t.observer&&t.observer.observe(document.body,k)};document.body?e():p.addEventListener("DOMContentLoaded",e)},t.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),j.forEach((function(e){return p.addEventListener(e,t.listener,!0)})))},t.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),j.forEach((function(e){return p.removeEventListener(e,t.listener,!0)})),this.stopped=!0)},t}()),I=function(t){!C&&t>0&&L.start(),!(C+=t)&&L.stop()},D=function(){function t(t,e){this.target=t,this.observedBox=e||i.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var t,e=S(this.target,this.observedBox,!0);return t=this.target,h(t)||function(t){switch(t.tagName){case"INPUT":if("image"!==t.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1}(t)||"inline"!==getComputedStyle(t).display||(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t}(),N=function(t,e){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=e},W=new WeakMap,_=function(t,e){for(var n=0;n<t.length;n+=1)if(t[n].target===e)return n;return-1},F=function(){function t(){}return t.connect=function(t,e){var n=new N(t,e);W.set(t,n)},t.observe=function(t,e,n){var r=W.get(t),o=0===r.observationTargets.length;_(r.observationTargets,e)<0&&(o&&a.push(r),r.observationTargets.push(new D(e,n&&n.box)),I(1),L.schedule())},t.unobserve=function(t,e){var n=W.get(t),r=_(n.observationTargets,e),o=1===n.observationTargets.length;r>=0&&(o&&a.splice(a.indexOf(n),1),n.observationTargets.splice(r,1),I(-1))},t.disconnect=function(t){var e=this,n=W.get(t);n.observationTargets.slice().forEach((function(n){return e.unobserve(t,n.target)})),n.activeTargets.splice(0,n.activeTargets.length)},t}(),H=function(){function t(t){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof t)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");F.connect(this,t)}return t.prototype.observe=function(t,e){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!g(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");F.observe(this,t,e)},t.prototype.unobserve=function(t){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!g(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");F.unobserve(this,t)},t.prototype.disconnect=function(){F.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t}();function X(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return V(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function U(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?q(Object(n),!0).forEach((function(e){G(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function G(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var J=function(t){var e=U({marginTop:10,marginRight:10,marginBottom:40,marginLeft:40},t);return U(U({},e),{},{boundedHeight:Math.max(e.height-e.marginTop-e.marginBottom,0),boundedWidth:Math.max(e.width-e.marginLeft-e.marginRight,0)})};function Y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const $=function(t){var e,n,i=t.data,a=t.dimensions,s=(e=function(t){var e=r().useRef(),n=J(t),o=X(r().useState(0),2),i=o[0],a=o[1],s=X(r().useState(0),2),c=s[0],u=s[1];r().useEffect((function(){if(!n.width||!n.height){var t=e.current,r=new H((function(t){if(Array.isArray(t)&&t.length){var e=t[0];i!==e.contentRect.width&&a(e.contentRect.width),c!==e.contentRect.height&&u(e.contentRect.height)}}));return r.observe(t),function(){return r.unobserve(t)}}}),[]);var l=J(U(U({},n),{},{width:n.width||i,height:n.height||c}));return[e,l]}(a),n=2,function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,n)||function(t,e){if(t){if("string"==typeof t)return Y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=s[0],u=s[1],l=r().useMemo((function(){return o.scaleLinear().domain([-5,5]).range([0,u.boundedWidth]).interpolate(o.interpolateRound)}),[u.boundedWidth]),f=r().useMemo((function(){return o.scaleLinear().range([u.boundedHeight,0]).interpolate(o.interpolateRound)}),[u.boundedHeight]);return r().useLayoutEffect((function(){o.min(i,(function(t){return t.logFC})),o.max(i,(function(t){return t.logFC}));var t=o.max(i,(function(t){return t.logP}));f.domain([0,t+5]);var e=o.axisBottom(l).ticks(u.width/80),n=o.axisLeft(f).ticks(u.height/50),r=o.select(c.current).select("svg"),a=o.select(c.current).select("canvas").node().getContext("2d");i.forEach((function(t){!function(t){a.beginPath(),a.fillStyle="red";var e=l(t.logFC),n=f(t.logP);a.arc(e,n,2,0,2*Math.PI,!0),a.fill()}(t)}));var s=r.append("g").attr("transform","translate(".concat(u.marginLeft,", ").concat(u.marginTop+u.boundedHeight,")")).call(e).attr("stroke-opacity",.25);r.append("text").attr("transform","translate(".concat(u.marginLeft+u.boundedWidth/2,", ").concat(-u.marginBottom/2+10+u.height,")")).attr("font-family","sans-serif").attr("font-size",10).style("text-anchor","middle").style("fill","black").text(" logFC ");var h=r.append("g").attr("transform","translate(".concat(u.marginLeft,", ").concat(u.marginTop,")")).call(n).attr("stroke-opacity",.25);function d(t){s.call(e.scale(t.rescaleX(l))),h.call(n.scale(t.rescaleY(f))),a.save(),a.clearRect(0,0,u.boundedWidth,u.boundedHeight),a.translate(t.x,t.y),a.scale(t.k,t.k),a.beginPath(),i.forEach((function(t){var e=l(t.logFC),n=f(t.logP);a.moveTo(e+2,n),a.arc(e,n,2,0,2*Math.PI)})),a.fill(),a.restore()}r.append("text").attr("transform","translate(".concat(u.marginLeft/2-5,", ").concat(u.boundedHeight/2," ) rotate(-90)")).attr("font-family","sans-serif").attr("font-size",10).style("fill","black").text("-log P"),o.select(a.canvas).call(o.zoom().scaleExtent([1,8]).translateExtent([[0,0],[u.boundedWidth,u.boundedHeight]]).on("zoom",(function(t){return d(t.transform)}))),d(o.zoomIdentity)}),[i]),r().createElement("div",{className:"Chart__wrapper",ref:c},r().createElement("svg",{width:u.width,height:u.height,style:{position:"absolute"}}),r().createElement("canvas",{width:u.boundedWidth,height:u.boundedHeight,style:{position:"absolute",marginLeft:u.marginLeft+"px",marginTop:u.marginTop+"px"}}))};module.exports.VolcanoPlot=e})();